* Under Construction
  :PROPERTIES:
  :ID:       AB613C88-95DA-4907-A84C-706E88AB92AB
  :END:

This puppet module will install weewx.

I am currently testing on a raspberry pi with an ambient weather model
WS-2080A.


* Raspberry pi
  :PROPERTIES:
  :ID:       49EA42EF-6A1F-4E9E-A186-E6058F3B35FE
  :END:

My bootstrapping checklist is here:

  - https://github.com/wu/journal/blob/master/2014.01.24.raspi-bootstrap.org

* Usage
  :PROPERTIES:
  :ID:       D3B88338-4FE7-4796-BA40-A7573C94699B
  :END:

#+begin_src puppet
  node default {
    $station_location = 'Hood River, Oregon'
    $station_latitude  = '45.686'
    $station_longitude = '-121.566'
    $station_altitude  = '700, foot'
    $station_url = 'http://www.example.com'
    $station_type = 'FineOffsetUSB'
    $station_model = 'WS2080'
    $rsync_server = 'www.threefools.org'
    $rsync_user = 'username'
    $rsync_path = '/weather'

    include weewx
  }

#+end_src


* Masterless
  :PROPERTIES:
  :ID:       48B5F777-07DD-459F-878B-734727A1B170
  :END:

If you want to apply this locally (without a master), then it is a
little more tricky.  This works--although I'm not sure it is ideal.

#+begin_src sh

  # get a copy of the puppet-weewx repo
  cd
  git clone git://github.com/wu/puppet-weewx.git weewx

  # install dependencies in 'modules' subdir with librarian-puppet
  cd weewx
  librarian-puppet install

  # edit mysite.pp, include your info
  vi mysite.pp

  # if you are using a station that does not use FineOffsetUSB, or if
  # you use reports other than rsync, you may need to edit
  # templates/weewx.conf

  # so puppet can find the weewx module
  ln -s $PWD modules/weewx

  sudo puppet apply --modulepath=$PWD/modules mysite.pp

#+end_src
